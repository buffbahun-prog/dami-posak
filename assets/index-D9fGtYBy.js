(function(){const o=document.createElement("link").relList;if(o&&o.supports&&o.supports("modulepreload"))return;for(const e of document.querySelectorAll('link[rel="modulepreload"]'))a(e);new MutationObserver(e=>{for(const r of e)if(r.type==="childList")for(const f of r.addedNodes)f.tagName==="LINK"&&f.rel==="modulepreload"&&a(f)}).observe(document,{childList:!0,subtree:!0});function c(e){const r={};return e.integrity&&(r.integrity=e.integrity),e.referrerPolicy&&(r.referrerPolicy=e.referrerPolicy),e.crossOrigin==="use-credentials"?r.credentials="include":e.crossOrigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function a(e){if(e.ep)return;e.ep=!0;const r=c(e);fetch(e.href,r)}})();let l=!1,m=null;"BarcodeDetector"in globalThis?(console.log("Barcode Detector supported!"),m=new BarcodeDetector({formats:["qr_code"]})):console.log("Barcode Detector is not supported by this browser.");const n=document.getElementById("video"),i=document.getElementById("overlay"),d=i.getContext("2d");function h(t){d.clearRect(0,0,i.width,i.height);const{x:o,y:c,width:a,height:e}=t.boundingBox;d.strokeStyle="red",d.lineWidth=4,d.strokeRect(o,c,a,e)}function y(){navigator.mediaDevices.getUserMedia({video:{facingMode:"environment"}}).then(t=>{n&&(n.srcObject=t,n.play(),n.addEventListener("loadeddata",()=>p(t)))}).catch(t=>{console.error("Error accessing camera:",t)})}let u=!1;function p(t){i.width=n.videoWidth,i.height=n.videoHeight,requestAnimationFrame(()=>g(t))}let s=null;async function g(t){if(!u){u=!0;try{if(!m||!n)return;(await m.detect(n)).forEach(c=>{h(c)}),t.getTracks().every(c=>c.readyState==="ended")&&s&&cancelAnimationFrame(s),s=requestAnimationFrame(()=>g(t)),console.log(s)}catch(o){console.error("Barcode detection failed:",o)}finally{u=!1}}}const b=document.getElementById("btn");b?.addEventListener("click",()=>{if(!l)return;n?.srcObject?.getTracks()?.forEach(o=>o.stop()),l=!1,s&&cancelAnimationFrame(s),d.clearRect(0,0,i.width,i.height)});const v=document.getElementById("stbtn");v?.addEventListener("click",()=>{l||(y(),l=!0)});
